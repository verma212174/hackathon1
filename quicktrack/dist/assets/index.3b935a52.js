(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function p(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(n){if(n.ep)return;n.ep=!0;const s=p(n);fetch(n.href,s)}})();document.addEventListener("DOMContentLoaded",()=>{const S=document.getElementById("track-tab"),r=document.getElementById("analytics-tab"),p=document.querySelector("main"),c=document.getElementById("analytics"),n=document.getElementById("task-input"),s=document.getElementById("start-tracking"),d=document.getElementById("log-manual"),i=document.getElementById("manual-start-time"),g=document.getElementById("manual-end-time"),E=document.getElementById("current-tasks"),L=document.getElementById("log-list"),k=document.getElementById("summary");let a=JSON.parse(localStorage.getItem("logs"))||[],l=[],T={};S.addEventListener("click",()=>{p.classList.remove("hidden"),c.classList.add("hidden")}),r.addEventListener("click",()=>{p.classList.add("hidden"),c.classList.remove("hidden"),D()}),s.addEventListener("click",()=>{const e=n.value.trim();if(i.classList.contains("hidden")){if(e){const t=v(e);l.push({description:e,startTime:new Date,endTime:null,duration:null,element:t}),E.appendChild(t),I(e,t.querySelector(".task-timer")),n.value=""}}else{const t=new Date(i.value),o=new Date(g.value);if(e&&t&&o&&o>t){const u=(o-t)/1e3;a.push({description:e,startTime:t,endTime:o,duration:u}),y(),f(),B()}}}),d.addEventListener("click",()=>{n.placeholder="Task description",i.classList.toggle("hidden"),g.classList.toggle("hidden"),s.textContent=i.classList.contains("hidden")?"Start":"Add"});function v(e){const t=document.createElement("div");return t.classList.add("task"),t.innerHTML=`
          <span class="task-name">${e}</span>
          <span class="task-timer">00:00:00</span>
          <button class="stop-button">Stop</button>
      `,t.querySelector(".stop-button").addEventListener("click",()=>b(e)),t}function I(e,t){T[e]=setInterval(()=>{const o=new Date,u=l.find($=>$.description===e),m=Math.round((o-u.startTime)/1e3),h=String(Math.floor(m/3600)).padStart(2,"0"),M=String(Math.floor(m%3600/60)).padStart(2,"0"),w=String(m%60).padStart(2,"0");t.textContent=`${h}:${M}:${w}`},1e3)}function b(e){clearInterval(T[e]);const t=l.find(o=>o.description===e);t.endTime=new Date,t.duration=(t.endTime-t.startTime)/1e3,a.push(t),y(),f(),t.element.remove(),l=l.filter(o=>o.description!==e)}function y(){localStorage.setItem("logs",JSON.stringify(a))}function f(){L.innerHTML="",a.forEach(e=>{const t=document.createElement("li");t.innerHTML=`
              <span>${e.description}</span>
              <span>${new Date(e.startTime).toLocaleString()}</span>
              <span>${new Date(e.endTime).toLocaleString()}</span>
              <span>${new Date(e.duration*1e3).toISOString().substr(11,8)}</span>
              <button class="delete-button">Delete</button>
          `,t.querySelector(".delete-button").addEventListener("click",()=>{a=a.filter(o=>o!==e),y(),f()}),L.appendChild(t)})}function B(){n.placeholder="What are you working on?",i.classList.add("hidden"),g.classList.add("hidden"),n.value="",i.value="",g.value="",s.textContent="Start"}function D(){const e=a.reduce((m,h)=>m+h.duration,0),t=String(Math.floor(e/3600)).padStart(2,"0"),o=String(Math.floor(e%3600/60)).padStart(2,"0"),u=String(e%60).padStart(2,"0");k.textContent=`Total Time Spent: ${t}:${o}:${u}`}f()});
